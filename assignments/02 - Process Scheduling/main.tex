\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}


\newif\ifbr
\newif\ifen

% Output Language
%\brtrue \usepackage[brazilian]{babel}
\entrue \usepackage[english]{babel}

\usepackage[parfill]{parskip}

\ifbr
\title{Escalonamento de Processos}
\author{Pedro H. Penna, João Caram e Henrique C. Freitas\\[0.3em]
\small Pontifícia Universidade Católica de Minas Gerais}
\date{}
\else\ifen
\title{Process Scheduling}
\author{
	Pedro H. Penna, Henrique Freitas,\\%
	Márcio Castro and Jean-François Méhaut\\[0.3em]
\small Pontifical Catholic University of Minas Gerais\\
\small Federal University of Santa Catarina\\
\small University of Grenoble Aples}

\date{}
\fi\fi


\begin{document}

\maketitle

\begin{abstract}

\ifbr
	\noindent Processos consistem na abstração fundamental de um sistema
	operacional: todo o resto do sistema é arquitetado com base nesta
	entidade. Neste projeto, você trabalhará com o principal componente do
	módulo de gerenciamento de processos do Nanvix, o escalonador de
	processos. Primeiramente, você irá estudar como o componente existente
	opera e, em seguida, irá propor melhorias a ele.
\else\ifen
	\noindent Processes are they key abstraction of every operating
	system, in which in fact the entire system is built upon. In this
	assignment, you will work with the main module of the process
	management subsystem in Nanvix, the process scheduler. First, you shall
	study the current implementation, and then you shall propose
	enhancements in it.
\fi\fi

\end{abstract}

\ifbr
	\subsubsection*{Fundamentação Teórica}

		O Nanvix é um sistema operacional multitarefa, isto é, ele suporta a
		execução simultânea de diferentes programas. O modo como esta
		funcionalidade é proporcionada, tanto no Nanvix quanto em outros
		sistemas, é simples. Cada programa é abstraído por uma entidade
		denominada processo, que encapsula o fluxo de execução, as
		variáveis, a pilha de execução e várias outras informações
		importantes relacionadas ao programa. Então, com esta abstração,
		tudo o que o sistema faz é alternar rapidamente entre as tarefas,
		proporcionando a ilusão de simultaneidade.

		O procedimento de alternar tarefas em si é direto, envolve apenas
		recarregar os registradores de máquina e as variáveis de ambiente
		com os dados do processo sendo admitido para execução. A etapa
		crítica, no entanto, está na escolha do processo a ser admitido para
		execução. Com vários processos residentes no sistema, diversas
		escolhas são possíveis: admitir o processo que estiver aguardando há
		mais tempo, admitir o processo que precisará do menor tempo para
		terminar, ou então admitir o processo com a mais alta prioridade,
		segundo um critério pré-estabelecido. Essa escolha é feita pelo
		módulo do sistema denominado escalonador de processos e exerce
		influência direta no desempenho, responsividade e política de
		justiça do sistema.
\else\ifen
	\subsection*{Background}

	Nanvix is a multitasking operating system. That is, it supports
	concurrent execution of multiple programs. To deliver this feature,
	likewise in other operating systems, Nanvix relies on processes, an
	abstraction of a running program that encapsulates the execution
	flow, variables, stack and all other important information that
	concerns the program itself. With this abstraction, all that the
	system does is to switch back and forth between the processes, by
	reloading machine registers and environment variables with the data from
	the process that is being admitted to run. This way, the
	operating system provides the illusion that programs are running
	simultaneously.

	 However, an important step relies on the selection of which process
	 to run. With many processes in the system, there are several
	 possibilities: run the process that is waiting longer, run the
	 process with the shortest remaining time next, or alternatively run
	 the process that has the highest priority. This choice is actually
	 carried out by the scheduler component of the process management
	 subsystem and it has great impact on the performance,
	 responsiveness and fairness of the system.
\fi

\ifbr
	\subsubsection*{Descrição do Projeto}

		O escalonador de processos do Nanvix adota a simples política
		\textit{round-robin}: atribuir a cada processo um \textit{quantum}
		de tempo e então escaloná-los seguindo o critério \textit{first-in
		first-out}. Para tanto, o sistema mantém, para cada processo, um
		contador que indica o tempo em que um processo está aguardando para
		executar. Quando o \textit{quantum} do processo executando acaba, o
		processo com maior contador é selecionado, atribuído a um novo
		\textit{quantum} e, então, colocado para executar.

		Essa política, de fácil implementação, é adequada para sistemas
		monotarefa simples, mas é insuficiente para sistemas mais robustos,
		com suporte a multitarefa, como o Nanvix. Suponha uma situação em
		que exista um processo que interage com o usuário, por exemplo um
		terminal, e outros 99 processos famintos por tempo de processador.
		Se o sistema atribui a cada processo 100 ms de \textit{quantum},
		cada processo executará a cada dez segundos. Apesar de plausível
		para os 99 processos limitados pelo tempo de processamento, esse
		tempo de espera para o processo de terminal é inadmissível.

		Para resolver este problema, você deverá implementar uma política de
		escalonamento mais robusta, baseada em prioridade. Toda vez que uma
		decisão de escalonamento tiver de ser tomada, o processo com a mais
		alta prioridade é selecionado. O esquema de prioridades implementado
		pode ser estático, mas tenha em mente que desenvolver um mecanismo
		dinâmico pode ser interessante. Junto com o projeto você deverá
		entregar uma pequena descrição sobre a solução implementada.
		Programas-exemplo serão fornecidos para que você teste o escalonador
		implementado e argumente, quais são as vantagens e (possíveis)
		desvantagens da estratégia projetada.
\else\ifen

	\subsection*{Assignment Description}

		The process scheduling in Nanvix follows the simple round-robin
		policy: it assigns to each process a \textit{quantum} of time, and
		then it schedules them in a first-in first-out fashion. For
		doing so, the operating system maintains for each process a
		counter, which keeps track of the time in which the process is
		waiting to be executed. When the \textit{quantum} of the running
		process ends, the process that is waiting longer is reassigned a
		new quantum and than it is selected to run.

		This policy is easy to implement and it delivers fairness to
		single-task systems. However, it is not enough for more robust
		systems that support multitasking. For instance, imagine a
		scenario in which there is an interactive process, like the
		terminal, and other $99$ cpu-hungry processes. If the process
		scheduler assigns $100$ ms of quantum to each process, each
		process runs every ten seconds. Although this may be fine for
		the $99$ process, it is surely not for the interactive process
		-- the user definitely would not enjoy his/her experience.

		TO address the above problem, you should implement a fairer
		scheduling policy, which is based on priorities. In this
		alternative approach, at every scheduling decision, the process
		with the highest priority should be selected for running. This
		priority-based scheme may be static, but keep in mind that a
		dynamic-priority mechanism may be interesting. With this
		assignment you should deliver a brief report about your
		solution. In addition, we will provide benchmarking programs so that
		you ca test and argue about the strengths and weaknesses of you
		design.

\fi\fi

\ifbr
	\subsubsection*{Por Onde Começar?}

		O código do gerenciador de processos do Nanvix está no diretório
		\texttt{kernel/pm}, dividido em vários arquivos, dentre eles:

		\begin{itemize}
			\item \texttt{pm.c}: inicialização do gerenciador de processos.
			\item \texttt{sched.c}: escalonamento de processos.
			\item \texttt{sleep.c}: implementação das funções utilitárias \texttt{sleep()} e \texttt{wakeup()}.
		\end{itemize}

		Nesse projeto, você deve se atentar ao arquivo \texttt{sched.c},
		principalmente na função \texttt{yield()}, que implementa a função
		de escalonamento.
\else\ifen
	\subsection*{Starting Point}
	
		The implementation of the process management subsystem is in the
		\texttt{kernel/pm} directory, and it is split into several
		files:
		%
		\begin{itemize}
			\item \texttt{pm.c}: initializes the process management subsystem.
			\item \texttt{sched.c}: process scheduler.
			\item \texttt{sleep.c}: implementations for  \texttt{sleep()} e \texttt{wakeup()}.
		\end{itemize}

		In this assignment, you should focus on the \texttt{sched.c}.
		More precisely in the \texttt{yield()} routine, which is the
		implementation of the process scheduler itself.
\fi

\end{document}
